<div class="flex h-screen">
  <nav class="flex flex-col w-52 h-full bg-white border-r border-gray-300 p-4 items-center">
    <div class="mb-8">
      <img src="https://ia800405.us.archive.org/15/items/logo_20251023/logo.png" alt="Logo" class="h-14 w-auto" />
    </div>
    <div class="flex flex-col w-full flex-1">
      <button
        (click)="setActiveSection('resumenSemanal')"
        [ngClass]="{
          'bg-gray-300': resumenSemanal,
          'hover:bg-gray-200': !resumenSemanal
        }"
        class="w-full p-2 mb-2 rounded text-left transition"
      >
        Resumen semanal
      </button>
      <button
        (click)="setActiveSection('miCalendario')"
        [ngClass]="{
          'bg-gray-300': miCalendario,
          'hover:bg-gray-200': !miCalendario
        }"
        class="w-full p-2 mb-2 rounded text-left transition"
      >
        Mi Calendario
      </button>
      <button
        (click)="setActiveSection('listaCompra')"
        [ngClass]="{
          'bg-gray-300': listaCompra,
          'hover:bg-gray-200': !listaCompra
        }"
        class="w-full p-2 mb-2 rounded text-left transition"
      >
        Lista de la compra
      </button>
      <button
        (click)="setActiveSection('recetas')"
        [ngClass]="{
          'bg-gray-300': recetas,
          'hover:bg-gray-200': !recetas
        }"
        class="w-full p-2 mb-2 rounded text-left transition"
      >
        Recetas
      </button>
      <button
        (click)="setActiveSection('foroRecetas')"
        [ngClass]="{
          'bg-gray-300': foroRecetas,
          'hover:bg-gray-200': !foroRecetas
        }"
        class="w-full p-2 mb-8 rounded text-left transition"
      >
        Foro de Recetas
      </button>

      <div class="mt-auto w-full">
        <button
          (click)="ejecutarScraper()"
          [disabled]="ejecutando"
          class="w-full mb-2 bg-green-500 text-white p-2 rounded-lg hover:bg-green-600 transition"
        >
          {{ ejecutando ? 'Actualizando precios...' : 'Actualizar precios' }}
        </button>

        <div *ngIf="mensajeScraper" class="text-center mt-2 text-sm text-gray-700">
          {{ mensajeScraper }}
        </div>

        <button
          (click)="alert('Cerrar sesión - funcionalidad no implementada')"
          class="w-full p-2 bg-gray-500 text-white rounded hover:bg-gray-400 transition mt-2"
        >
          Cerrar sesión
        </button>
      </div>
    </div>
  </nav>

  <main class="flex-1 p-6 bg-gray-50 overflow-auto">
    <section *ngIf="resumenSemanal">
      <h2 class="text-xl mb-2">Resumen Semanal</h2>
      <p>Este es tu resumen semanal con las principales actividades y estadísticas.</p>
    </section>
    <section *ngIf="miCalendario">
      <h2 class="text-xl mb-2">Mi Calendario</h2>
      <p>Consulta y gestiona tus eventos y citas programadas.</p>
    </section>
    <section *ngIf="listaCompra">
      <h2 class="text-xl mb-2">Lista de la compra</h2>
      <p>Artículos que necesitas comprar en tu próxima visita al supermercado.</p>
    </section>
    <section *ngIf="recetas">
      <h2 class="text-xl mb-2">Recetas</h2>
      <p>Explora y guarda tus recetas favoritas.</p>
      <div class="mt-10 flex flex-col items-start max-w-lg">
        <label for="ia-input" class="mb-2 text-md">Pregunta a la IA:</label>
        <div class="flex w-full">
          <input
            id="ia-input"
            [(ngModel)]="preguntaIA"
            (keydown.enter)="enviarPreguntaIA()"
            class="flex-1 p-2 rounded-l border border-gray-400"
            placeholder="Ej. Dame una receta con pollo"
            [disabled]="cargandoIA"
          />
          <button
            (click)="enviarPreguntaIA()"
            class="bg-blue-500 text-white px-4 py-2 rounded-r hover:bg-blue-600 transition"
            [disabled]="cargandoIA || !preguntaIA.trim()"
          >
            Enviar
          </button>
        </div>
        <div *ngIf="cargandoIA" class="mt-2 text-gray-500 text-sm">Consultando IA...</div>
        <div *ngIf="respuestaIA" class="mt-4 bg-gray-100 p-3 rounded shadow">
          <b>Respuesta de la IA:</b>
          <div class="whitespace-pre-line mt-2">{{ respuestaIA }}</div>
        </div>
        <div *ngIf="errorIA" class="mt-2 text-red-500 text-sm">{{ errorIA }}</div>
      </div>
    </section>
    <section *ngIf="foroRecetas">
      <h2 class="text-xl mb-2">Foro de Recetas</h2>
      <p>Participa en la comunidad compartiendo recetas.</p>
    </section>
  </main>
</div>